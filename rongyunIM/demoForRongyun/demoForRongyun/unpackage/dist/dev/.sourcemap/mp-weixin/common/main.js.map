{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zhr/study/practice/rongyunIM/demoForRongyun/demoForRongyun/App.vue?390a","webpack:////Users/zhr/study/practice/rongyunIM/demoForRongyun/demoForRongyun/App.vue?61de","uni-app:///App.vue","webpack:////Users/zhr/study/practice/rongyunIM/demoForRongyun/demoForRongyun/App.vue?ea93","webpack:////Users/zhr/study/practice/rongyunIM/demoForRongyun/demoForRongyun/App.vue?025d"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","RongIMLib","require","im","init","appkey","Vue","config","productionTip","prototype","$im","$axios","axios","App","mpType","app","store","$mount"],"mappings":";;;;;;;;;iDAAA;;;;;AAKA;AACA;AACA;AACA,8F,ynCAPA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAOA,IAAMC,SAAS,GAAGC,mBAAO,CAAC,6BAAD,CAAzB;AACA;AACA,IAAMC,EAAE,GAAGF,SAAS,CAACG,IAAV,CAAe,EAAEC,MAAM,EAAE,eAAV,EAAf,CAAX;AACAC,aAAIC,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AACAF,aAAIG,SAAJ,CAAcC,GAAd,GAAoBP,EAApB;AACAG,aAAIG,SAAJ,CAAcE,MAAd,GAAuBC,gBAAvB;AACAC,aAAIC,MAAJ,GAAa,KAAb;AACA,IAAMC,GAAG,GAAG,IAAIT,YAAJ;AACXU,OAAK,EAALA,cADW;AAELH,YAFK,EAAZ;;AAIA,UAAAE,GAAG,EAACE,MAAJ,G;;;;;;;;;;;;;;;;;ACpBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACuD;AACL;AACc;;;AAGhE;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,yEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACe,gF;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAi0B,CAAgB,iyBAAG,EAAC,C;;;;;;;;;;;;ACCr1B;eACA;AACA,MADA,kBACA;AACA;AACA,GAHA;AAIA;AACA;AACA;AACA;AACA;AACA,KAFA,MAEA;AACA;AACA;AACA,GAZA;AAaA;AACA;AACA,GAfA;AAgBA;AACA;AACA,GAlBA;AAmBA;AACA,WADA,qBACA;;AAEA;AACA;AACA,+DADA,EACA;AACA;AACA,uBADA,EAFA;;AAKA,sBALA;AAMA;AACA,6DADA,CACA;AADA,SANA;AASA,UATA,CASA;AACA;AACA;AACA;AACA,4BADA;AAEA,oCAFA;AAGA,oCAHA;;AAKA;AACA;AACA,OAnBA;AAoBA,KAxBA;AAyBA,iBAzBA,yBAyBA,QAzBA,EAyBA;AACA;AACA;AACA;AACA,KA7BA;AA8BA,WA9BA,mBA8BA,OA9BA,EA8BA;AACA;AACA;AACA;AACA,OAHA,EAGA,KAHA,CAGA;AACA;AACA,OALA;AAMA,KArCA;AAsCA,cAtCA,wBAsCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAPA,EAOA,KAPA,CAOA;AACA;;AAEA,OAVA;AAWA,KArDA;AAsDA,eAtDA,yBAsDA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,oBAHA,wBAGA,KAHA,EAGA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAJA;AAKA,SAXA;AAYA;AACA,eAbA,mBAaA,KAbA,EAaA;AACA;AACA;AACA;AACA;AACA,SAlBA;AAmBA;AACA,cApBA,kBAoBA,KApBA,EAoBA;AACA;AACA,SAtBA;AAuBA;AACA,gBAxBA,oBAwBA,KAxBA,EAwBA;AACA;;;;;;;;;;;;;AAaA;AACA,SAvCA;AAwCA,iBAxCA,qBAwCA,KAxCA,EAwCA;AACA;;;;;;;AAOA;AACA;;;;;;;AAOA;AACA,SAzDA;;AA2DA,KAtHA,EAnBA,E;;;;;;;;;;;;ACFA;AAAA;AAAA;AAAA;AAAgiD,CAAgB,g6CAAG,EAAC,C;;;;;;;;;;ACApjD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"common/main.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\n\n\nimport Vue from 'vue'\nimport App from './App'\nimport store from './store/index.js'\nimport axios from './components/request.js'\nconst RongIMLib = require('@rongcloud/imlib-v4')\n// 应用初始化以获取 RongIMLib 实例对象，请务必保证此过程只被执行一次\nconst im = RongIMLib.init({ appkey: 'p5tvi9dspv574' });\nVue.config.productionTip = false\nVue.prototype.$im = im\nVue.prototype.$axios = axios\nApp.mpType = 'app'\nconst app = new Vue({\n\tstore,\n    ...App\n})\napp.$mount()","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"","<script>\r\n\t// var isShow\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {}\r\n\t\t},\r\n\t\tcreated: function() {\r\n\t\t\tthis.createWatch();\n\t\t\tconst token = uni.getStorageSync('IMToken');\n\t\t\tif(token!=\"\"&&token!=null){\n\t\t\t\tthis.connect(token)\n\t\t\t}else{\n\t\t\t\tthis.getMeId();\n\t\t\t}\r\n\t\t},\r\n\t\tonShow: function() {\r\n\t\t\tconsole.log('App Show')\r\n\t\t},\r\n\t\tonHide: function() {\r\n\t\t\tconsole.log('App Hide')\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tgetMeId(){\n\t\t\t\t\n\t\t\t\tvar datas = null;\n\t\t\t\tuni.request({\n\t\t\t\t\turl: \"http://localhost:9090/rongYunServer/rongyun/find\", //仅为示例，并非真实接口地址。\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tid:\"user002\"\n\t\t\t\t\t},\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded', //自定义请求头信息\n\t\t\t\t\t}\n\t\t\t\t}).then((res) => {\n\t\t\t\t\tdatas = res[1].data.data.user;\n\t\t\t\t\tconsole.log(datas);\n\t\t\t\t\tvar meInfo = {\n\t\t\t\t\t\tid:datas.senderId,\n\t\t\t\t\t\tusername:datas.senderName,\n\t\t\t\t\t\tavatar:datas.senderAvatar\n\t\t\t\t\t};\n\t\t\t\t\tthis.createConnect(datas.token);\n\t\t\t\t\tuni.setStorageSync('meInfo', meInfo);\n\t\t\t});\r\n\t\t},\r\n\t\t\tcreateConnect(ry_token){\r\n\t\t\t\t\t\tuni.setStorageSync('IMToken', ry_token);\r\n\t\t\t\t\t\tthis.connect(ry_token)\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t},\r\n\t\t\tconnect(imtoken){  // 建立 IM 连接\r\n\t\t\t\tthis.$im.connect({ token: imtoken }).then(user => {\r\n\t\t\t\t  console.log('链接成功, 链接用户 id 为: ', user.id);\r\n\t\t\t\t  this.userListFn();\r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t  console.log('链接失败: ', error.code, error.msg);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tuserListFn(){\r\n\t\t\t\tconsole.log(\"app.vue\")\r\n\t\t\t\tvar that = this\r\n\t\t\t\t\r\n\t\t\t\tthis.$im.Conversation.getList().then(conversationList => {\r\n\t\t\t\t  console.log('获取会话列表成功', conversationList);\r\n\t\t\t\t  var meId = uni.getStorageSync(\"meInfo\").id\r\n\t\t\t\t  conversationList = conversationList.filter(item=>(item.latestMessage.content.content.msg.sideinfo.uid==meId || item.latestMessage.content.content.msg.userinfo.uid==meId))\r\n\t\t\t\t  console.log(\"过滤与自己无关的消息\",conversationList)\r\n\t\t\t\t  that.$store.commit('updateUserList',{arr:conversationList,isUpdateMessageNum:false})\r\n\t\t\t\t  \r\n\t\t\t\t}).catch(error => {\r\n\t\t\t\t  console.log('获取会话列表失败: ', error.code, error.msg);\r\n\t\t\t\t  \r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcreateWatch(){// 添加事件监听\r\n\t\t\t\tconst that = this\r\n\t\t\t\tconsole.log(\"添加事件监听\")\r\n\t\t\t\t// 获取会话列表\r\n\t\t\t\t\r\n\t\t\t\tthis.$im.watch({\r\n\t\t\t\t\t\r\n\t\t\t\t  // 监听会话列表变更事件\r\n\t\t\t\t  conversation (event) {\r\n\t\t\t\t\tconsole.log(\"会话表变更\",event.updatedConversationList)\r\n\t\t\t\t\tthat.$store.commit('updateUserList',{arr:event.updatedConversationList,isUpdateMessageNum:'newMsg'})\r\n\t\t\t\t\tthat.$nextTick(() => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log(\"重新获取会话列表_防止只有一个\")\r\n\t\t\t\t\t    that.userListFn()\r\n\t\t\t\t\t});\r\n\t\t\t\t  },\r\n\t\t\t\t  // 监听消息通知\r\n\t\t\t\t  message (event) {\r\n\t\t\t\t\tconsole.log(\"新消息\")\r\n\t\t\t\t\tthat.$store.commit('addIMMsg',event.message)\r\n\t\t\t\t\t// 新接收到的消息内容\r\n\t\t\t\t\tconst message = event.message;\r\n\t\t\t\t  },\r\n\t\t\t\t  // 监听 IM 连接状态变化\r\n\t\t\t\t  status (event) {\r\n\t\t\t\t\tconsole.log('connection status:', event.status);\r\n\t\t\t\t  },\r\n\t\t\t\t  // 监听聊天室 KV 数据变更\r\n\t\t\t\t  chatroom (event) {\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 聊天室 KV 存储数据更新\r\n\t\t\t\t\t * @example\r\n\t\t\t\t\t * [\r\n\t\t\t\t\t *  {\r\n\t\t\t\t\t *    \"key\": \"name\",\r\n\t\t\t\t\t *    \"value\": \"我是小融融\",\r\n\t\t\t\t\t *    \"timestamp\": 1597591258338, \r\n\t\t\t\t\t *    \"chatroomId\": \"z002\", \r\n\t\t\t\t\t *    \"type\": 1 // 1: 更新（ 含:修改和新增 ）、2: 删除\r\n\t\t\t\t\t *  },\r\n\t\t\t\t\t * ]\r\n\t\t\t\t\t */\r\n\t\t\t\t\tconst updatedEntries = event.updatedEntries\r\n\t\t\t\t  },\r\n\t\t\t\t  expansion (event) {\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 更新的消息拓展数据\r\n\t\t\t\t\t * @example {\r\n\t\t\t\t\t *    expansion: { key: 'value' },      // 设置或更新的扩展值\r\n\t\t\t\t\t *    messageUId: 'URIT-URIT-ODMF-DURR' // 设置或更新扩展的消息 uid\r\n\t\t\t\t\t * }\r\n\t\t\t\t\t */\r\n\t\t\t\t\tconst updatedExpansion = event.updatedExpansion;\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 删除的消息拓展数据\r\n\t\t\t\t\t * @example {\r\n\t\t\t\t\t *    deletedKeys: ['key1', 'key2'],    // 设置或更新的扩展值\r\n\t\t\t\t\t *    messageUId: 'URIT-URIT-ODMF-DURR' // 设置或更新扩展的消息 uid\r\n\t\t\t\t\t * }\r\n\t\t\t\t\t */\r\n\t\t\t\t\tconst deletedExpansion = event.deletedExpansion;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t// @import \"uview-ui/index.scss\";\r\n\t@import \"./static/css/iconfont.css\";\r\n\t@import \"./static/css/animation.css\";\r\n</style>\r\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1668440888160\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}